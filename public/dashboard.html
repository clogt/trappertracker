<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Dashboard - TrapperTracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body class="bg-gray-100 dark:bg-gray-900 font-sans text-gray-800 dark:text-gray-200">
    <nav class="bg-white dark:bg-gray-800 shadow">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="/" class="text-xl font-bold text-indigo-600 dark:text-indigo-400">TrapperTracker</a>
                    <span class="ml-4 text-sm text-gray-600 dark:text-gray-400">My Dashboard</span>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="userEmail" class="text-sm text-gray-600 dark:text-gray-400"></span>
                    <button id="logoutButton" class="text-sm bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700">Logout</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto p-4 max-w-7xl">
        <div id="dashboard-message" class="text-center text-sm mb-4 hidden"></div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-4">
                <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">My Reports</h3>
                <p id="totalMyReports" class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">0</p>
            </div>
            <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-4">
                <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Danger Zones</h3>
                <p id="myDangerZones" class="text-2xl font-bold text-red-600 dark:text-red-400">0</p>
            </div>
            <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-4">
                <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Lost Pets</h3>
                <p id="myLostPets" class="text-2xl font-bold text-yellow-600 dark:text-yellow-400">0</p>
            </div>
            <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-4">
                <h3 class="text-sm font-medium text-gray-500 dark:text-gray-400">Found Pets</h3>
                <p id="myFoundPets" class="text-2xl font-bold text-green-600 dark:text-green-400">0</p>
            </div>
        </div>

        <!-- My Reports Section -->
        <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-6 mb-6">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-2xl font-semibold">My Reports</h2>
                <a href="/#report-form" class="bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 text-sm">+ New Report</a>
            </div>

            <!-- Filter Tabs -->
            <div class="border-b border-gray-200 dark:border-gray-700 mb-4">
                <nav class="flex -mb-px space-x-4">
                    <button class="report-filter-tab active py-2 px-1 border-b-2 font-medium text-sm" data-type="all">
                        All Reports
                    </button>
                    <button class="report-filter-tab py-2 px-1 border-b-2 font-medium text-sm" data-type="dangerZone">
                        Danger Zones
                    </button>
                    <button class="report-filter-tab py-2 px-1 border-b-2 font-medium text-sm" data-type="lostPet">
                        Lost Pets
                    </button>
                    <button class="report-filter-tab py-2 px-1 border-b-2 font-medium text-sm" data-type="foundPet">
                        Found Pets
                    </button>
                    <button class="report-filter-tab py-2 px-1 border-b-2 font-medium text-sm" data-type="dangerousAnimal">
                        Dangerous Animals
                    </button>
                </nav>
            </div>

            <!-- Reports List -->
            <div id="reportsList" class="space-y-4">
                <p class="text-gray-500">Loading your reports...</p>
            </div>
        </div>
    </div>

    <!-- Edit Report Modal -->
    <div id="editReportModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold">Edit Report</h3>
                <button id="closeEditModal" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300">âœ•</button>
            </div>
            <form id="editReportForm" class="space-y-4">
                <input type="hidden" id="editReportId">
                <input type="hidden" id="editReportType">

                <div id="editFormFields"></div>

                <div class="flex space-x-2">
                    <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 px-4 rounded-md hover:bg-indigo-700">Save Changes</button>
                    <button type="button" id="cancelEdit" class="flex-1 bg-gray-300 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-400">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteConfirmModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden overflow-y-auto h-full w-full z-50">
        <div class="relative top-1/3 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white dark:bg-gray-800">
            <div class="text-center">
                <h3 class="text-lg font-semibold mb-4">Delete Report?</h3>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-6">This action cannot be undone.</p>
                <div class="flex space-x-2">
                    <button id="confirmDelete" class="flex-1 bg-red-600 text-white py-2 px-4 rounded-md hover:bg-red-700">Delete</button>
                    <button id="cancelDelete" class="flex-1 bg-gray-300 text-gray-800 py-2 px-4 rounded-md hover:bg-gray-400">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <style>
        .report-filter-tab {
            border-bottom: 2px solid transparent;
            color: #6b7280;
            transition: all 0.2s;
        }
        .report-filter-tab.active {
            border-bottom-color: #6366f1;
            color: #6366f1;
        }
        .report-filter-tab:hover {
            color: #4f46e5;
        }
        .report-card {
            transition: all 0.2s;
        }
        .report-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }
    </style>

    <script src="assets/js/dashboard.js"></script>
</body>
</html>
